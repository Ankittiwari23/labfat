pipeline {
    agent any
    environment {
        PATH = "C:/Maven/apache-maven-3.9.5/bin$PATH"
	JAVA_HOME = "C:\Program Files\Java\jdk-17.0.1"
        // Add other environment variables as needed
    }
    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }
        stage('Build') {
            steps {
                bat "C:\\Windows\\System32\\cmd.exe /c mvn clean install"
            }
        }
        stage('Build Image'){
            steps {
                bat "C:\\Windows\\System32\\cmd.exe /c docker build -t labfat.jar ."
            }
        }
        stage("Docker Login"){
            steps {
                bat "C:\\Windows\\System32\\cmd.exe /c docker login --username ankit2392001 --password Gagan@123!"
            }
        }
        stage("Docker add tag"){
            steps {
                bat "C:\\Windows\\System32\\cmd.exe /c docker tag labfat.jar ankit2392001/labfat.jar:tag"
            }
        }
        stage("Push Image"){
            steps {
                bat "C:\\Windows\\System32\\cmd.exe /c docker push ankit2392001/labfat.jar:tag"
            }
        }
    }
}
